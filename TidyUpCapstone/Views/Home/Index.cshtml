@model TidyUpCapstone.Models.ViewModels.Account.LoginViewModel

@{
    ViewBag.HideNavigation = true;
}

@section Styles {
    <link rel="stylesheet" href="~/css/style1.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/responsive-improvements.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/modal.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/AlertIndex.css" asp-append-version="true" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
}

<!-- Scroll Container -->
<div class="scroll-container">

    <!-- SECTION 1: Main Landing Section -->
    <div class="section">
        <div class="main-container">
            <!-- Logo Section -->
            <div class="logo-section">
                <img src="~/assets/logo-tidyup.png" alt="TidyUp Logo" class="logo" />
            </div>

            <!-- Main Content Container -->
            <div class="content-wrapper">
                <!-- Left Side - Brand Section -->
                <div class="brand-section">
                    <div class="title">Build Better Habits-Together.</div>
                </div>

                <!-- Right Side - Form Container -->
                <div class="form-container">
                    <div class="form-wrapper">
                        <!-- Welcome Section -->
                        <div class="welcome-section active">
                            <div class="welcome-header">
                                <h2 class="welcome-title">Welcome to <br /> TidyUp</h2>
                            </div>

                            <!-- Call to Action Buttons -->
                            <div class="cta-buttons">
                                <div class="input-box">
                                    <a href="#" class="btn-get-started" id="openRegisterModal">
                                        <span>Get Started</span>
                                    </a>
                                </div>
                                <div class="input-box">
                                    <a href="#" class="btn-sign-in" id="openLoginModal">
                                        <span>Sign In</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SECTION 2: Community Section -->
    <div class="section community-section">
        <div class="community-container">
            <div class="community-header">
                <h2 class="community-title">Join Our Community</h2>
                <p class="community-subtitle">
                    Welcome to a new kind of space - where less is more and simplicity reigns.
                </p>
                <p class="community-description">
                    Our platform is built for those who are ready to give unused items a second life, earn rewards, and make habits for what truly matters.
                </p>
            </div>

            <div class="community-cta">
                <a href="/Community/Join" class="btn-join-community">
                    <i class="fas fa-users"></i>
                    <span>Join Community</span>
                </a>
            </div>
        </div>

        <!-- Floating Avatars -->
        <div class="floating-avatars">
            <div class="avatar large" style="background-image: url('https://images.unsplash.com/photo-1494790108755-2616c6c1ac09?w=120&h=120&fit=crop&crop=face'); background-size: cover; background-position: center;"></div>
            <div class="avatar medium" style="background-image: url('https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=80&h=80&fit=crop&crop=face'); background-size: cover; background-position: center;"></div>
            <div class="avatar small" style="background-image: url('https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=60&h=60&fit=crop&crop=face'); background-size: cover; background-position: center;"></div>
            <div class="avatar medium" style="background-image: url('https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=80&h=80&fit=crop&crop=face'); background-size: cover; background-position: center;"></div>
            <div class="avatar small" style="background-image: url('https://images.unsplash.com/photo-1544725176-7c40e5a71c5e?w=60&h=60&fit=crop&crop=face'); background-size: cover; background-position: center;"></div>
            <div class="avatar large" style="background-image: url('https://images.unsplash.com/photo-1547425260-76bcadfb4f2c?w=120&h=120&fit=crop&crop=face'); background-size: cover; background-position: center;"></div>
            <div class="avatar medium" style="background-image: url('https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=80&h=80&fit=crop&crop=face'); background-size: cover; background-position: center;"></div>
            <div class="avatar small" style="background-image: url('https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=60&h=60&fit=crop&crop=face'); background-size: cover; background-position: center;"></div>
            <div class="avatar large" style="background-image: url('https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=120&h=120&fit=crop&crop=face'); background-size: cover; background-position: center;"></div>
            <div class="avatar medium" style="background-image: url('https://images.unsplash.com/photo-1507591064344-4c6ce005b128?w=80&h=80&fit=crop&crop=face'); background-size: cover; background-position: center;"></div>
        </div>
    </div>

</div>

<!-- Scroll Indicator -->
<div class="scroll-indicator">
    <div class="scroll-dot active" data-section="0"></div>
    <div class="scroll-dot" data-section="1"></div>
</div>

<!-- LOGIN MODAL -->
<div class="login-modal-overlay" id="loginModal">
    <div class="login-modal-container">
        <div class="login-modal-header">
            <button class="login-modal-close" id="closeLoginModal">
                <i class="fas fa-times"></i>
            </button>
            <div class="login-auth-header">
                <h2>Sign in to Tidy Up</h2>
            </div>
        </div>

        <div class="login-modal-body">
            <!-- Error Messages -->
            <div class="login-alert login-alert-danger" id="loginErrorAlert" style="display: none;">
                <i class="fas fa-exclamation-circle"></i>
                <span id="loginErrorMessage"></span>
            </div>

            <!-- OAuth Section -->
            <form method="post" action="/Account/ExternalLogin" class="login-oauth-section">
                @Html.AntiForgeryToken()
                <input type="hidden" name="provider" value="Google" />
                <input type="hidden" name="returnUrl" value="@ViewData["ReturnUrl"]" />
                <button type="submit" class="login-btn login-btn-google">
                    <i class="fab fa-google"></i>
                    Sign in with Google
                </button>
            </form>

            <button class="login-btn login-btn-facebook" disabled>
                <i class="fab fa-facebook-f"></i>
                Sign in with Facebook
            </button>

            <!-- Divider -->
            <div class="login-divider">
                <span>OR</span>
            </div>

            <!-- Manual Login Form -->
            <form method="post" action="/Account/ModalLogin" id="loginForm">
                @Html.AntiForgeryToken()
                <input type="hidden" name="returnUrl" value="@ViewData["ReturnUrl"]" />

                <!-- Email -->
                <div class="login-form-group">
                    <input name="Email" type="email" class="login-form-control" placeholder=" " required />
                    <label class="login-form-label">Email</label>
                </div>

                <!-- Password -->
                <div class="login-form-group">
                    <input name="Password" type="password" class="login-form-control" placeholder=" " required />
                    <label class="login-form-label">Password</label>
                </div>

                <!-- Remember Me & Forgot Password -->
                <div class="login-form-group login-form-row">
                    <div class="login-form-check">
                        <input name="RememberMe" class="login-form-check-input" type="checkbox" id="loginRememberMe" />
                        <label class="login-form-check-label" for="loginRememberMe">Remember me</label>
                    </div>
                    <a href="/Account/ForgotPassword" class="login-forgot-password-link">Forgot Password?</a>
                </div>

                <!-- Sign In Button -->
                <button type="submit" class="login-btn login-btn-primary" id="loginSubmitBtn">
                    Sign In
                </button>
            </form>

            <!-- Footer -->
            <div class="login-footer-links">
                <p>
                    Don't have an account?
                    <a href="#" onclick="switchToRegister()">Create Account</a>
                </p>
                <p class="login-terms-text">
                    By continuing, you agree to our
                    <a href="#">Terms</a> &
                    <a href="#">Privacy Policy</a>
                </p>
            </div>
        </div>
    </div>
</div>

<!-- REGISTER MODAL -->
<div class="register-modal-overlay" id="registerModal">
    <div class="register-modal-container">
        <div class="register-modal-header">
            <button class="register-modal-close" id="closeRegisterModal">
                <i class="fas fa-times"></i>
            </button>
            <div class="register-auth-header">
                <h2>Create Your Account</h2>
                <p>Start decluttering with ease</p>
            </div>
        </div>

        <div class="register-modal-body">
            <!-- Error Messages -->
            <div class="register-alert register-alert-danger" id="registerErrorAlert" style="display: none;">
                <i class="fas fa-exclamation-circle"></i>
                <span id="registerErrorMessage"></span>
            </div>

            <!-- OAuth Section -->
            <form method="post" action="/Account/ExternalLogin" class="register-oauth-section">
                @Html.AntiForgeryToken()
                <input type="hidden" name="provider" value="Google" />
                <input type="hidden" name="returnUrl" value="@ViewData["ReturnUrl"]" />
                <button type="submit" class="register-btn register-btn-google">
                    <i class="fab fa-google"></i>
                    Create an account with Google
                </button>
            </form>

            <button class="register-btn register-btn-facebook" disabled>
                <i class="fab fa-facebook-f"></i>
                Create an account with Facebook
            </button>

            <!-- Divider -->
            <div class="register-divider">
                <span>OR</span>
            </div>

            <!-- Manual Registration Form -->
            <form method="post" action="/Account/ModalRegister" id="registerForm">
                @Html.AntiForgeryToken()
                <input type="hidden" name="returnUrl" value="@ViewData["ReturnUrl"]" />

                <!-- Email -->
                <div class="register-form-group">
                    <div class="register-input-group">
                        <input name="Email" type="email" class="register-form-control" placeholder=" " required />
                        <label class="register-form-label">Email Address</label>
                    </div>
                </div>

                <!-- Username -->
                <div class="register-form-group">
                    <div class="register-input-group">
                        <input name="Username" type="text" class="register-form-control" placeholder=" " required />
                        <label class="register-form-label">Username</label>
                    </div>
                </div>

                <!-- Name Fields -->
                <div class="register-form-row">
                    <div class="register-form-group">
                        <div class="register-input-group">
                            <input name="FirstName" type="text" class="register-form-control" placeholder=" " required />
                            <label class="register-form-label">First Name</label>
                        </div>
                    </div>
                    <div class="register-form-group">
                        <div class="register-input-group">
                            <input name="LastName" type="text" class="register-form-control" placeholder=" " required />
                            <label class="register-form-label">Last Name</label>
                        </div>
                    </div>
                </div>

                <!-- Password -->
                <div class="register-form-group">
                    <div class="register-input-group">
                        <input name="Password" type="password" class="register-form-control" placeholder=" " required />
                        <label class="register-form-label">Password</label>
                        <i class="fas fa-eye register-show-password" onclick="toggleRegisterPassword(this)"></i>
                    </div>
                </div>

                <!-- Confirm Password -->
                <div class="register-form-group">
                    <div class="register-input-group">
                        <input name="ConfirmPassword" type="password" class="register-form-control" placeholder=" " required />
                        <label class="register-form-label">Confirm Password</label>
                        <i class="fas fa-eye register-show-password" onclick="toggleRegisterPassword(this)"></i>
                    </div>
                </div>

                <div class="register-terms-section">
                    <div class="register-form-check">
                        <input name="AcceptTerms" class="register-form-check-input" type="checkbox" id="acceptTerms" required />
                        <label class="register-form-check-label" for="acceptTerms">
                            I accept the <a href="@Url.Action("Terms", "Legal")" target="_blank">Terms of Service</a>
                        </label>
                    </div>
                    <div class="register-form-check">
                        <input name="AcceptPrivacy" class="register-form-check-input" type="checkbox" id="acceptPrivacy" required />
                        <label class="register-form-check-label" for="acceptPrivacy">
                            I accept the <a href="@Url.Action("Privacy", "Legal")" target="_blank">Privacy Policy</a>
                        </label>
                    </div>
                    <div class="register-form-check">
                        <input name="MarketingEmails" class="register-form-check-input" type="checkbox" id="marketingEmails" />
                        <label class="register-form-check-label" for="marketingEmails">
                            Subscribe to marketing emails (optional)
                        </label>
                    </div>
                </div>

                <!-- Submit -->
                <button type="submit" class="register-btn register-btn-primary" id="registerSubmitBtn">
                    Start Your Journey
                </button>
            </form>

            <!-- Footer -->
            <div class="register-footer-links">
                <p>
                    Already have an account?
                    <a href="#" onclick="switchToLogin()">Sign In</a>
                </p>
            </div>
        </div>
    </div>
</div>

<!-- Server-side data for JavaScript -->
<script>
    window.serverData = {
        loginError: '@Html.Raw(TempData["LoginError"]?.ToString()?.Replace("'", "\\'") ?? "")',
        successMessage: '@Html.Raw(TempData["SuccessMessage"]?.ToString()?.Replace("'", "\\'") ?? "")',
        showLogin: '@(Context.Request.Query["showLogin"].ToString() == "true" ? "true" : "false")',
        showRegister: '@(Context.Request.Query["showRegister"].ToString() == "true" ? "true" : "false")'
    };
</script>

@section Scripts {
    <script src="~/js/IndexPageScroll.js"></script>
    <script src="~/js/IndexAvatarAnimation.js"></script>
    <script src="~/js/modalIndex.js"></script>
}